--
cip: <to be assigned>
title: Change group epoch score calculation for voter rewards
author: @zviadm
discussions-to: https://forum.celo.org/t/change-group-epoch-score-calculation/594
status: Draft
type: Standards Track
category (*only required for Standards Track): Ring 1
created: 2020/08/30
license: Apache 2.0
--
  
## Summary
Change voter rewards calculations to benefit smaller validator groups vs larger validator groups.

## Abstract

Currently, group epoch score for voter rewards is calculated as an "average of its members epoch score". 

Because of this, larger groups with more validators in them, have a distinct advantage for 
voters. Larger groups are able to average out individual bad validator scores with better performing
validators, thus ending up with higher average score per epoch.

This seems counter productive for network health, since it would be better to incentivize voters
to vote for smaller groups for more decentralization.

Fix for this can be very simple, we change group epoch score to be:
* Minimum(member validator epoch scores), instead of Avg(member validator epoch scores).

Calculating score per epoch using minimum, incetinvizes voting for smaller groups since they
are more likely to maintain better epoch scores, and it also puts more pressure on larger groups
to make sure all their validators maintain high uptime.

This is a pretty simple change, and it only needs to be changed in one place here:
calculateGroupEpochScore function in Validators.sol
https://github.com/celo-org/celo-monorepo/blob/master/packages/protocol/contracts/governance/Validators.sol#L418

## Motivation

- Shift voter incentive to vote for smaller groups instead of larger groups.
- Provide more incentive for larger groups to maintain high uptime for all of their validators.

## Specification

Change calculateGroupEpochScore function in Validators.sol to calculate group score using 
a minimum instead of average.
https://github.com/celo-org/celo-monorepo/blob/master/packages/protocol/contracts/governance/Validators.sol#L418

## Risks

Standard contract upgrade risk. Change should be very simple, thus there isnt a huge risk with
the change itself.

## Implementation


